{% extends "background.html" %}



{% block overlay %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-5">
      <div class="card shadow-sm login-card">
        <div class="card-body p-4">

          <!-- Compact CLIO line, inside the box -->
          <div class="text-center mb-3">
            <span class="clio-chip">CLIO</span>
            <div class="small text-muted mt-1">
              Case, Laboratory, Investigations, and Operations
            </div>
            <div class="xsmall text-muted mt-1">
              <em>Uniting Case, Laboratory, Medical, Investigative, and Administrative Operations within CLIO.</em>
            </div>
          </div>

          <p class="text-center text-muted mb-4">Sign in to continue</p>

          <form method="POST" id="form" novalidate>
            {{ form.hidden_tag() }}

            <div class="form-group">
              <label for="{{ form.username.id }}" class="font-weight-semibold">{{ form.username.label.text }}</label>
              {{ form.username(class='form-control', placeholder='Username') }}
            </div>

            <div class="form-group mb-2">
              <label for="{{ form.password.id }}" class="font-weight-semibold">{{ form.password.label.text }}</label>
              <div class="input-group">
                {{ form.password(class='form-control', placeholder='Password', autocomplete='current-password') }}
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" type="button" id="togglePassword">Show</button>
                </div>
              </div>
            </div>

            {% if invalid_credentials %}
            <div class="alert alert-danger mb-0 mt-3" role="alert">
              Invalid credentials! Please try again.
            </div>
            {% endif %}

            <div class="form-group mt-4 mb-0">
              {{ form.submit(class='btn btn-primary btn-block') }}
              {% if user_lst|length == 0 %}
              <a href="{{ url_for('users.add') }}" class="btn btn-outline-primary btn-block mt-2">Create User</a>
              {% endif %}
            </div>

            <div class="text-center mt-3">
              <a class="small" href="https://form.asana.com/?k=3jpLK3YqHQfhZ_zqNIjU8g&d=843318490710140">
                Feedback form
              </a>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>

<style>
  .login-card { border: 0; border-radius: .75rem; }
  .login-card .card-body { padding: 2rem !important; }
  .font-weight-semibold { font-weight: 600; }
  .xsmall { font-size: .8rem; }

  /* Small, unobtrusive chip for CLIO */
  .clio-chip {
    display: inline-block;
    padding: .15rem .5rem;
    border-radius: .5rem;
    font-weight: 700;
    letter-spacing: .06em;
    font-size: 1.5rem;
    background: rgba(13,110,253,.08); /* subtle */
    color: #0d6efd; /* uses Bootstrap primary hue */
    border: 1px solid rgba(13,110,253,.15);
  }
</style>

<script>
  (function () {
    var btn = document.getElementById('togglePassword');
    var pwd = document.getElementById('{{ form.password.id }}');
    if (btn && pwd) {
      btn.addEventListener('click', function () {
        var show = pwd.getAttribute('type') === 'password';
        pwd.setAttribute('type', show ? 'text' : 'password');
        btn.textContent = show ? 'Hide' : 'Show';
      });
    }
  })();
</script>
{% endblock %}
